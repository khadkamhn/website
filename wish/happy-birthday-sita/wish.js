!function($,win){$.fn.inViewport=function(cb,qc){return this.each((function(i,el){function visPx(){var H=$(this).height(),r=el.getBoundingClientRect(),t=r.top,b=r.bottom;return cb.call(el,Math.max(0,t>0?H-t:b<H?b:H))}visPx(),$(qc||win).on("resize scroll",visPx)}))}}(jQuery,window),function($){function injector(t,splitter,klass,after){var text=t.text(),a=text.split(splitter),inject="";a.length&&($(a).each((function(i,item){inject+='<span class="'+klass+(i+1)+'" aria-hidden="true">'+item+"</span>"+after})),t.attr("aria-label",text).empty().append(inject))}var methods={init:function(){return this.each((function(){injector($(this),"","char","")}))},words:function(){return this.each((function(){injector($(this)," ","word"," ")}))},lines:function(){return this.each((function(){var r="eefec303079ad17405c889e092e105b0";injector($(this).children("br").replaceWith(r).end(),r,"line","")}))}};$.fn.lettering=function(method){return method&&methods[method]?methods[method].apply(this,[].slice.call(arguments,1)):"letters"!==method&&method?($.error("Method "+method+" does not exist on jQuery.lettering"),this):methods.init.apply(this,[].slice.call(arguments,0))}}(jQuery),function($){"use strict";function isInEffect(effect){return/In/.test(effect)||$.inArray(effect,$.fn.textillate.defaults.inEffects)>=0}function isOutEffect(effect){return/Out/.test(effect)||$.inArray(effect,$.fn.textillate.defaults.outEffects)>=0}function stringToBoolean(str){return"true"!==str&&"false"!==str?str:"true"===str}function getData(node){var attrs=node.attributes||[],data={};return attrs.length?($.each(attrs,(function(i,attr){var nodeName=attr.nodeName.replace(/delayscale/,"delayScale");/^data-in-*/.test(nodeName)?(data.in=data.in||{},data.in[nodeName.replace(/data-in-/,"")]=stringToBoolean(attr.nodeValue)):/^data-out-*/.test(nodeName)?(data.out=data.out||{},data.out[nodeName.replace(/data-out-/,"")]=stringToBoolean(attr.nodeValue)):/^data-*/.test(nodeName)&&(data[nodeName.replace(/data-/,"")]=stringToBoolean(attr.nodeValue))})),data):data}function animateTokens($tokens,options,cb){var count=$tokens.length;count?(options.shuffle&&($tokens=function shuffle(o){for(var j,x,i=o.length;i;j=parseInt(Math.random()*i),x=o[--i],o[i]=o[j],o[j]=x);return o}($tokens)),options.reverse&&($tokens=$tokens.toArray().reverse()),$.each($tokens,(function(i,t){var $token=$(t);function complete(){isInEffect(options.effect)?$token.css("visibility","visible"):isOutEffect(options.effect)&&$token.css("visibility","hidden"),!(count-=1)&&cb&&cb()}var delay=options.sync?options.delay:options.delay*i*options.delayScale;$token.text()?setTimeout((function(){!function animate($t,effect,cb){$t.addClass("animated "+effect).css("visibility","visible").show(),$t.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",(function(){$t.removeClass("animated "+effect),cb&&cb()}))}($token,options.effect,complete)}),delay):complete()}))):cb&&cb()}var Textillate=function(element,options){var base=this,$element=$(element);base.init=function(){base.$texts=$element.find(options.selector),base.$texts.length||(base.$texts=$('<ul class="texts"><li>'+$element.html()+"</li></ul>"),$element.html(base.$texts)),base.$texts.hide(),base.$current=$("<span>").html(base.$texts.find(":first-child").html()).prependTo($element),isInEffect(options.in.effect)?base.$current.css("visibility","hidden"):isOutEffect(options.out.effect)&&base.$current.css("visibility","visible"),base.setOptions(options),base.timeoutRun=null,setTimeout((function(){base.options.autoStart&&base.start()}),base.options.initialDelay)},base.setOptions=function(options){base.options=options},base.triggerEvent=function(name){var e=$.Event(name+".tlt");return $element.trigger(e,base),e},base.in=function(index,cb){index=index||0;var $tokens,$elem=base.$texts.find(":nth-child("+((index||0)+1)+")"),options=$.extend(!0,{},base.options,$elem.length?getData($elem[0]):{});$elem.addClass("current"),base.triggerEvent("inAnimationBegin"),$element.attr("data-active",$elem.data("id")),base.$current.html($elem.html()).lettering("words"),"char"==base.options.type&&base.$current.find('[class^="word"]').css({display:"inline-block","-webkit-transform":"translate3d(0,0,0)","-moz-transform":"translate3d(0,0,0)","-o-transform":"translate3d(0,0,0)",transform:"translate3d(0,0,0)"}).each((function(){$(this).lettering()})),$tokens=base.$current.find('[class^="'+base.options.type+'"]').css("display","inline-block"),isInEffect(options.in.effect)?$tokens.css("visibility","hidden"):isOutEffect(options.in.effect)&&$tokens.css("visibility","visible"),base.currentIndex=index,animateTokens($tokens,options.in,(function(){base.triggerEvent("inAnimationEnd"),options.in.callback&&options.in.callback(),cb&&cb(base)}))},base.out=function(cb){var $elem=base.$texts.find(":nth-child("+((base.currentIndex||0)+1)+")"),$tokens=base.$current.find('[class^="'+base.options.type+'"]'),options=$.extend(!0,{},base.options,$elem.length?getData($elem[0]):{});base.triggerEvent("outAnimationBegin"),animateTokens($tokens,options.out,(function(){$elem.removeClass("current"),base.triggerEvent("outAnimationEnd"),$element.removeAttr("data-active"),options.out.callback&&options.out.callback(),cb&&cb(base)}))},base.start=function(index){setTimeout((function(){base.triggerEvent("start"),function run(index){base.in(index,(function(){var length=base.$texts.children().length;index+=1,!base.options.loop&&index>=length?(base.options.callback&&base.options.callback(),base.triggerEvent("end")):(index%=length,base.timeoutRun=setTimeout((function(){base.out((function(){run(index)}))}),base.options.minDisplayTime))}))}(index||0)}),base.options.initialDelay)},base.stop=function(){base.timeoutRun&&(clearInterval(base.timeoutRun),base.timeoutRun=null)},base.init()};$.fn.textillate=function(settings,args){return this.each((function(){var $this=$(this),data=$this.data("textillate"),options=$.extend(!0,{},$.fn.textillate.defaults,getData(this),"object"==typeof settings&&settings);data?"string"==typeof settings?data[settings].apply(data,[].concat(args)):data.setOptions.call(data,options):$this.data("textillate",data=new Textillate(this,options))}))},$.fn.textillate.defaults={selector:".texts",loop:!1,minDisplayTime:2e3,initialDelay:0,in:{effect:"fadeInLeftBig",delayScale:1.5,delay:50,sync:!1,reverse:!1,shuffle:!1,callback:function(){}},out:{effect:"hinge",delayScale:1.5,delay:50,sync:!1,reverse:!1,shuffle:!1,callback:function(){}},autoStart:!0,inEffects:[],outEffects:["hinge"],callback:function(){},type:"char"}}(jQuery),function($){$.fn.fitText=function(kompressor,options){var compressor=kompressor||1,settings=$.extend({minFontSize:Number.NEGATIVE_INFINITY,maxFontSize:Number.POSITIVE_INFINITY},options);return this.each((function(){var $this=$(this),resizer=function(){$this.css("font-size",Math.max(Math.min($this.width()/(10*compressor),parseFloat(settings.maxFontSize)),parseFloat(settings.minFontSize)))};resizer(),$(window).on("resize.fittext orientationchange.fittext",resizer)}))}}(jQuery),window.scrollme=function($){var _this={},$document=$(document),$window=$(window),$wrap=$(".gallery-wrap"),$box=$(".content");return _this.body_height=0,_this.viewport_height=0,_this.viewport_top=0,_this.viewport_bottom=0,_this.viewport_top_previous=-1,_this.elements=[],_this.elements_in_view=[],_this.property_defaults={opacity:1,translatex:0,translatey:0,translatez:0,rotatex:0,rotatey:0,rotatez:0,scale:1,scalex:1,scaley:1,scalez:1},_this.scrollme_selector=".scrollme",_this.animateme_selector=".animateme",_this.update_interval=10,_this.easing_functions={linear:function(x){return x},easeout:function(x){return x*x*x},easein:function(x){return 1-(x=1-x)*x*x},easeinout:function(x){return x<.5?4*x*x*x:1-4*(x=1-x)*x*x}},_this.init_events=["ready","page:load","page:change"],_this.init_if=function(){return!0},_this.init=function(){return!!_this.init_if()&&(_this.init_elements(),_this.on_resize(),$window.on("resize orientationchange",(function(){_this.on_resize()})),$window.load((function(){setTimeout((function(){_this.on_resize()}),100)})),setInterval(_this.update,_this.update_interval),!0)},_this.init_elements=function(){$(_this.scrollme_selector).each((function(){var element={};element.element=$(this);var effects=[];$(this).find(_this.animateme_selector).addBack(_this.animateme_selector).each((function(){var effect={};effect.element=$(this),effect.when=effect.element.data("when"),effect.from=effect.element.data("from"),effect.to=effect.element.data("to"),effect.element.is("[data-crop]")?effect.crop=effect.element.data("crop"):effect.crop=!0,effect.element.is("[data-easing]")?effect.easing=_this.easing_functions[effect.element.data("easing")]:effect.easing=_this.easing_functions.easeout;var properties={};effect.element.is("[data-opacity]")&&(properties.opacity=effect.element.data("opacity")),effect.element.is("[data-translatex]")&&(properties.translatex=effect.element.data("translatex")),effect.element.is("[data-translatey]")&&(properties.translatey=effect.element.data("translatey")),effect.element.is("[data-translatez]")&&(properties.translatez=effect.element.data("translatez")),effect.element.is("[data-rotatex]")&&(properties.rotatex=effect.element.data("rotatex")),effect.element.is("[data-rotatey]")&&(properties.rotatey=effect.element.data("rotatey")),effect.element.is("[data-rotatez]")&&(properties.rotatez=effect.element.data("rotatez")),effect.element.is("[data-scale]")&&(properties.scale=effect.element.data("scale")),effect.element.is("[data-scalex]")&&(properties.scalex=effect.element.data("scalex")),effect.element.is("[data-scaley]")&&(properties.scaley=effect.element.data("scaley")),effect.element.is("[data-scalez]")&&(properties.scalez=effect.element.data("scalez")),effect.properties=properties,effects.push(effect)})),element.effects=effects,_this.elements.push(element)}))},_this.update=function(){window.requestAnimationFrame((function(){_this.update_viewport_position(),_this.viewport_top_previous!=_this.viewport_top&&(_this.update_elements_in_view(),_this.animate()),_this.viewport_top_previous=_this.viewport_top}))},_this.animate=function(){for(var elements_in_view_length=_this.elements_in_view.length,i=0;i<elements_in_view_length;i++)for(var element=_this.elements_in_view[i],effects_length=element.effects.length,e=0;e<effects_length;e++){var effect=element.effects[e];switch(effect.when){case"view":case"span":var start=element.top-_this.viewport_height,end=element.bottom;break;case"exit":start=element.bottom-_this.viewport_height,end=element.bottom;break;default:start=element.top-_this.viewport_height,end=element.top}effect.crop&&(start<0&&(start=0),end>_this.body_height-_this.viewport_height&&(end=_this.body_height-_this.viewport_height));var scroll=(_this.viewport_top-start)/(end-start),from=effect.from,to=effect.to,scroll_relative=(scroll-from)/(to-from),scroll_eased=effect.easing(scroll_relative),opacity=_this.animate_value(scroll,scroll_eased,from,to,effect,"opacity"),translatey=_this.animate_value(scroll,scroll_eased,from,to,effect,"translatey"),translatex=_this.animate_value(scroll,scroll_eased,from,to,effect,"translatex"),translatez=_this.animate_value(scroll,scroll_eased,from,to,effect,"translatez"),rotatex=_this.animate_value(scroll,scroll_eased,from,to,effect,"rotatex"),rotatey=_this.animate_value(scroll,scroll_eased,from,to,effect,"rotatey"),rotatez=_this.animate_value(scroll,scroll_eased,from,to,effect,"rotatez"),scale=_this.animate_value(scroll,scroll_eased,from,to,effect,"scale"),scalex=_this.animate_value(scroll,scroll_eased,from,to,effect,"scalex"),scaley=_this.animate_value(scroll,scroll_eased,from,to,effect,"scaley"),scalez=_this.animate_value(scroll,scroll_eased,from,to,effect,"scalez");"scale"in effect.properties&&(scalex=scale,scaley=scale,scalez=scale),effect.element.css({opacity:opacity,transform:"translate3d( "+translatex+"px , "+translatey+"px , "+translatez+"px ) rotateX( "+rotatex+"deg ) rotateY( "+rotatey+"deg ) rotateZ( "+rotatez+"deg ) scale3d( "+scalex+" , "+scaley+" , "+scalez+" )"})}},_this.animate_value=function(scroll,scroll_eased,from,to,effect,property){var value_default=_this.property_defaults[property];if(!(property in effect.properties))return value_default;var value_target=effect.properties[property],forwards=to>from;if(scroll<from&&forwards)return value_default;if(scroll>to&&forwards)return value_target;if(scroll>from&&!forwards)return value_default;if(scroll<to&&!forwards)return value_target;var new_value=value_default+scroll_eased*(value_target-value_default);switch(property){case"opacity":new_value=new_value.toFixed(2);break;case"translatex":case"translatey":case"translatez":new_value=new_value.toFixed(0);break;case"rotatex":case"rotatey":case"rotatez":new_value=new_value.toFixed(1);break;case"scale":new_value=new_value.toFixed(3)}return new_value},_this.update_viewport_position=function(){_this.viewport_top=$wrap.scrollTop(),_this.viewport_bottom=_this.viewport_top+_this.viewport_height},_this.update_elements_in_view=function(){_this.elements_in_view=[];for(var elements_length=_this.elements.length,i=0;i<elements_length;i++)_this.elements[i].top<_this.viewport_bottom&&_this.elements[i].bottom>_this.viewport_top&&_this.elements_in_view.push(_this.elements[i])},_this.on_resize=function(){_this.update_viewport(),_this.update_element_heights(),_this.update_viewport_position(),_this.update_elements_in_view(),_this.animate()},_this.update_viewport=function(){_this.body_height=$box.height(),_this.viewport_height=$window.height()},_this.update_element_heights=function(){for(var elements_length=_this.elements.length,i=0;i<elements_length;i++){var element_height=_this.elements[i].element.outerHeight(),position=_this.elements[i].element.offset();_this.elements[i].height=element_height,_this.elements[i].top=position.top,_this.elements[i].bottom=position.top+element_height}},$document.on(_this.init_events.join(" "),(function(){_this.init()})),_this}(jQuery),function(){try{var bg=["ins","ins2","ins3","ins4"],hb=["hbd","hbd2","hbd3","hbd4"];randBg=bg[Math.floor(Math.random()*bg.length)],randHb=hb[Math.floor(Math.random()*hb.length)]}catch(err){}wish={mp3Id:[],music:new Howl({preload:!0,autoplay:!1,onload:function(){wish.loader.hide()},src:["audio/wish.ogg","audio/wish.mp3"],sprite:{box:[0,30.453514739229025],btn:[1e3,499.54648526077096],fw1:[2e3,5064.013605442176],fw2:[8e3,1464.013605442176],fw3:[1e4,3960.000000000001],fw4:[14e3,2016.0090702947855],hbd:[17e3,30302.04081632653],hbd2:[48e3,36675.91836734694],hbd3:[85e3,34709.0022675737],hbd4:[12e4,54270.00000000001],ins:[175e3,93665.85034013605],ins2:[269e3,120527.52834467117],ins3:[39e4,127934.08163265303],ins4:[518e3,61758.571428571486],pop:[58e4,70.31746031748298],thx:[581e3,13178.888888888878]}}),dear:{dob:"Feb 16, 2000",name:"Sita",nickname:"Sita"},init:function(){this.time(),this.candle(),this.name(),this.greeting(),this.loader.init(),this.gallery.init(),this.balloon(),this.emoji(),this.screen(),this.motion.check(),$("body").hasClass("mk")||($("body,html,img").bind("contextmenu",(function(){return!1})),$(document).keydown((function(e){return!1}))),wish.mp3Id.btn=wish.music.play("btn"),wish.mp3Id.box=wish.music.play("box"),wish.mp3Id.pop=wish.music.play("pop"),wish.mp3Id.hbd=wish.music.play("hbd"),wish.mp3Id.hbd2=wish.music.play("hbd2"),wish.mp3Id.hbd3=wish.music.play("hbd3"),wish.mp3Id.hbd4=wish.music.play("hbd4"),wish.mp3Id.ins=wish.music.play("ins"),wish.mp3Id.ins2=wish.music.play("ins2"),wish.mp3Id.ins3=wish.music.play("ins3"),wish.mp3Id.ins4=wish.music.play("ins4"),wish.mp3Id.thx=wish.music.play("thx"),wish.mp3Id.fw1=wish.music.play("fw1"),wish.mp3Id.fw2=wish.music.play("fw2"),wish.mp3Id.fw3=wish.music.play("fw3"),wish.mp3Id.fw4=wish.music.play("fw4"),wish.music.loop(!0,wish.mp3Id.hbd),wish.music.loop(!0,wish.mp3Id.hbd2),wish.music.loop(!0,wish.mp3Id.hbd3),wish.music.loop(!0,wish.mp3Id.hbd4),wish.music.loop(!0,wish.mp3Id.ins),wish.music.loop(!0,wish.mp3Id.ins2),wish.music.loop(!0,wish.mp3Id.ins3),wish.music.loop(!0,wish.mp3Id.ins4),wish.music.stop()},age:function(d1,d2){if(d1){d1=new Date(d1);var diff=(d2=d2||new Date).getTime()-d1.getTime();return Math.floor(diff/315576e5)}},time:function(){var bday=new Date(this.dear.dob),where="",now=new Date;now.setHours(0,0,0,0),bday.setFullYear(now.getFullYear());var prev=new Date,next=new Date;prev.setHours(0,0,0,0),next.setHours(0,0,0,0),prev.setDate(now.getDate()-1),next.setDate(now.getDate()+1),where=now.getTime()==bday.getTime()?"Today is":prev.getTime()==bday.getTime()?"Yesterday was":next.getTime()==bday.getTime()?"Tomorrow is":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][bday.getMonth()]+" "+bday.getDate()+" is",$(".text-wrap .where").text(where)},candle:function(){var candle_numb=this.age(new Date(this.dear.dob)).toString().split("");2==candle_numb.length&&($(".age:first-child .yy").text(candle_numb[0]),$(".age:last-child .yy").text(candle_numb[1]))},name:function(){$('[bday="name"]').text(this.dear.name||"Dear"),$('[bday="nickname"]').text(this.dear.nickname||this.dear.name||"Dear");var bg="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' version='1.1' height='65px' width='110px'%3E%3Cdefs%3E%3Cstyle type='text/css'%3E %3C/style%3E%3C/defs%3E%3Cg style='font-family:Rajdhani, cursive' font-family='Rajdhani, cursive' font-size='14' fill='%23404040'%3E%3Ctext x='0' y='50' transform='rotate(-15)'%3EHappy Birthday%3C/text%3E%3Ctext x='40' y='70' transform='rotate(-15)'%3E"+(this.dear.nickname||this.dear.name)+"%3C/text%3E%3C/g%3E%3C/svg%3E";$('[bday="bg"]').css("background-image",'url("'+bg+'")')},greeting:function(){for(var wish=[[0,4,"Good night!"],[5,11,"Good morning!"],[12,16,"Good afternoon!"],[17,20,"Good evening!"],[21,24,"Good night!"]],hr=(new Date).getHours(),i=0;i<wish.length;i++)if(hr>=wish[i][0]&&hr<=wish[i][1]){$(".greeting").text(wish[i][2]);break}},randNumb:function(max,arr=!0){try{for(var randoms=function(max){var myArr=function shuffle(o){for(var j,x,i=o.length;i;j=Math.floor(Math.random()*i),x=o[--i],o[i]=o[j],o[j]=x);return o}(function range(upTo){for(var result=[],i=0;i<upTo;i++)result.push(i);return result}(max));return function(){return myArr.shift()}}(max),rand=randoms(),result=[];null!=rand;)result.push(rand+1),rand=randoms();return arr?result:0+Math.floor((max-0)*Math.random())}catch(err){}},motion:{reduce:!1,check:function(){const mediaQuery=window.matchMedia("(prefers-reduced-motion: reduce)");mediaQuery.addEventListener("change",(()=>{mediaQuery.matches?wish.motion.reduce=!0:wish.motion.reduce=!1}))}},loader:{init:function(t){$(window).bind("load",(function(){$(".loader").fadeOut(t||400)}))},show:function(t){$(".loader").fadeIn(t||400)},hide:function(t){$(".loader").fadeOut(t||400)}},cake:{start:function(){try{var cl=$(".cake .cl:last-child");cl.removeClass("actived "+cl.data("out")).addClass("active "+cl.data("in")),$(".cake .cl").off().on("animationend webkitAnimationEnd oAnimationEnd mozAnimationEnd",(function(){$(this).removeClass("actived "+$(this).data("out")).addClass("active");var cl=$(this).prev(".cl");cl.removeClass("actived "+cl.data("out")).addClass("active "+cl.data("in")),cl.hasClass("layer_c")&&$(".title").addClass("d-fold"),cl.hasClass("layer_b")&&$(".title").removeClass("d-color"),cl.hasClass("candle")&&setTimeout((function(){$(".title").removeClass("d-fold");var usr=$(".name");usr.removeClass("d-hide").textillate({in:{effect:usr.data("in"),delayScale:1.5,delay:50,callback:function(){setTimeout((function(){var expo_b=$(".expo-b");expo_b.removeClass("d-none "+expo_b.data("out")).addClass("animated "+expo_b.data("in"))}),1500)}},out:{effect:usr.data("out"),delayScale:1.5,delay:50,shuffle:!0,callback:function(){setTimeout((function(){wish.gallery.sliceIn()}),1e3)}},callback:function(){}}).fitText(1,{minFontSize:"28px",maxFontSize:"72px"}),usr.textillate("in"),setTimeout((function(){$(".text-numb").removeClass("d-hide "+$(".text-numb").data("out")).addClass("animated "+$(".text-numb").data("in")),setTimeout((function(){$(".text-numb .yy").each((function(){var d=$(this).text(),yy=new CountUp($(this)[0],d,{startVal:d>5?1:9});yy.error||yy.start((function(){$(".confetti").fadeIn(2e3)}))}))}),400)}),1e3)}),2e3)}))}catch(err){}},stop:function(){try{var cl=$(".cake .cl:first-child");cl.removeClass("active "+cl.data("in")).addClass("activated "+cl.data("out")),$(".cake .cl").off().on("animationend webkitAnimationEnd oAnimationEnd mozAnimationEnd",(function(){$(this).removeClass("active "+$(this).data("in")).addClass("activated");var cl=$(this).next(".cl");cl.removeClass("active "+cl.data("in")).addClass("activated "+cl.data("out")),cl.hasClass("layer_b")&&$(".title").addClass("d-color")})),$(".text-numb").removeClass("d-hide "+$(".text-numb").data("in")).addClass("animated "+$(".text-numb").data("out")),$(".title").addClass("d-fold"),$(".confetti").fadeOut(2e3),$(".name").textillate("out"),$(".gallery-wrap").scrollTop(0)}catch(err){}}},gallery:{init:function(){this.slice(),$(window).bind("resize",this.slice);var expo_t=$(".expo-thanks");$(window).bind("load",(function(){$(".balloon").inViewport((function(visible){if(visible){var ball=$(".balloon .bln-itm-wrp:first-child>.bln-has-itm:first-child");ball.hasClass("animated")||!$(".thank-you").is(":visible")&&$(".gallery-wrap").hasClass("active")&&(wish.music.stop(wish.mp3Id.pop),wish.music.play(wish.mp3Id.pop)),ball.removeClass("d-hide animated "+ball.data("out")).addClass("animated "+ball.data("in"))}else $(".balloon .bln-has-itm").each((function(){var ball=$(this);ball.addClass("d-hide").removeClass(ball.data("in")+" animated "+ball.data("out"))}))}),".gallery-wrap"),$(".bln-has-itm").off().on("animationend webkitAnimationEnd oAnimationEnd mozAnimationEnd",(function(){var bln=$(this),nxt=bln.next(".bln-has-itm");nxt.length?nxt.removeClass("d-hide animated "+nxt.data("out")).addClass("animated "+nxt.data("in")):bln.closest(".bln-itm-wrp").next(".bln-itm-wrp").find(".bln-has-itm").siblings().eq(0).removeClass("d-hide animated "+bln.data("out")).addClass("animated "+bln.data("in")),!$(".thank-you").is(":visible")&&$(".gallery-wrap").hasClass("active")&&(nxt.length||bln.closest(".bln-itm-wrp").next(".bln-itm-wrp").find(".bln-has-itm").siblings().eq(0).length)&&(wish.music.stop(wish.mp3Id.pop),wish.music.play(wish.mp3Id.pop)),nxt.index()<0&&!bln.closest(".bln-itm-wrp").next(".bln-itm-wrp").length&&(expo_t.removeClass("d-none animated "+expo_t.data("out")).addClass("animated "+expo_t.data("in")).animate({scrollTop:0},100),$(".gallery-wrap").animate({scrollTop:$(".gallery-wrap").prop("scrollHeight")},600))}))})),$(".gallery-wrap").bind("scroll",(function(){$(".scrollme").attr("style")?$(".scroll-wrap").removeClass("d-hide"):$(".scroll-wrap").addClass("d-hide")})),$(window).bind("orientationchange",(function(){$(".gallery-wrap").scrollTop(0)}));var lightbox=new PhotoSwipeLightbox({gallery:".gallery",children:"a",pswpModule:PhotoSwipe,pinchToClose:!1});lightbox.on("uiRegister",(function(){lightbox.pswp.ui.registerElement({name:"mk-caption",order:9,isButton:!1,appendTo:"root",html:"Caption",onInit:(el,pswp)=>{lightbox.pswp.on("change",(()=>{const currSlideElement=lightbox.pswp.currSlide.data.element;let captionHTML="";if(currSlideElement){const hiddenCaption=currSlideElement.querySelector("figcaption"),author=currSlideElement.getAttribute("data-author");authHTML=author?'<div class="author">By <em>'+author+"</em></div>":"",captionHTML=hiddenCaption?hiddenCaption.innerHTML:currSlideElement.querySelector("img").getAttribute("alt")}el.innerHTML=captionHTML+authHTML||""}))}})})),lightbox.init(),$(".txt-z .heartBeat").off().on("vclick",(function(){$(".react").fadeIn(600),wish.heartBeat&&clearTimeout(wish.heartBeat),wish.heartBeat=setTimeout((function(){$(".react").fadeOut(1e3)}),2e3)}))},slice:function(){try{var g=$(".gallery"),h=g.outerHeight(),w=g.outerWidth(),j=0,k=0,bx=w/4,by=h/4,rw=0;g.find(".item").each((function(i){i%4==0?(j=0,rw+=1):j+=1,k=rw-1;var px,py=0;switch(rw){case 1:px=bx*j,py=0;break;case 2:case 3:case 4:px=bx*j,py=by*k}$(this).addClass("row-"+rw+" col-"+(j+1)).find("figcaption").css({"background-size":w+"px","background-position":"-"+px+"px -"+py+"px"})}))}catch(err){}},sliceIn:function(){try{$(".expo-a,.expo-b").each((function(){$(this).removeClass($(this).data("in")).removeClass($(this).data("out")).addClass("d-none")}));var g=wish.randNumb(20),gw=$(".gallery-wrap"),expo_c=$(".expo-c");gw.find(".item img,.item figcaption").addClass("d-hide"),gw.addClass("d-hide-bdr").removeClass("d-hide-all active"),expo_c.addClass("d-none").removeClass(expo_c.data("out")+" animated "+expo_c.data("in")),setTimeout((function(){for(i=0;i<g.length;i++)$(".gallery .item:nth-child("+g[i]+") figcaption").removeClass("d-hide "+gw.data("out")).css({"animation-duration":".4s","animation-delay":i/20+"s"}).addClass("animated "+gw.data("in"));var gc=0,gi=gw.find(".item").length;$(".gallery figcaption").on("animationend webkitAnimationEnd oAnimationEnd mozAnimationEnd",(function(){gc++,expo_c.hasClass(expo_c.data("out"))||gc!=gi||(gw.find(".item img").removeClass("d-hide"),expo_c.removeClass("d-none "+expo_c.data("out")).addClass("animated "+expo_c.data("in")),setTimeout((function(){gw.removeClass("d-hide-bdr")}),250))}))}),800)}catch(err){}},sliceOut:function(){try{var g=wish.randNumb(20),gw=$(".gallery-wrap");for(i=0;i<g.length;i++)$(".gallery .item:nth-child("+g[i]+") figcaption").removeClass(gw.data("in")).css({"animation-duration":".4s","animation-delay":i/20+"s"}).addClass("animated "+gw.data("out"));gw.removeClass("d-hide").addClass("active")}catch(err){}}},balloon:function(){try{for(var bln=$(".balloon"),txt=("Happy Birthday "+this.dear.nickname).toUpperCase().split(" "),htm="",itm=bln.html().replace(";display:none",""),splitText=function(txt){for(var h="",s=txt.split(""),i=0;i<s.length;i++){var num=Math.floor(26*Math.random())+1;num*=Math.floor(14*Math.random())+1==1?1:-1,itm=itm.replace('dur="0s"','dur="'+(Math.floor(5*Math.random())+.25)+'s"'),h=h+'<div class="bln-has-itm d-hide" data-in="fadeInUp" data-out="fadeOutDown"><div class="bln-itm" data-text="'+s[i]+'" style="top:'+num+"px;animation-delay:"+(Math.floor(4*Math.random())+1)/4+"s;animation-duration:"+(Math.floor(20*Math.random())+4)/4+'s">'+itm+"</div></div>"}return h},i=0;i<txt.length;i++)htm=htm+'<div class="bln-itm-wrp">'+splitText(txt[i])+"</div>",i==txt.length-1&&bln.empty().html(htm)}catch(err){}},emoji:function(){for(var react=$(".react").addClass("ball"),emoji=['<i class="emoji emoji--like"><i class="emoji__hand"><i class="emoji__thumb"></i></i></i>','<i class="emoji emoji--love"><i class="emoji__heart"></i></i>','<i class="emoji emoji--haha"><i class="emoji__face"><i class="emoji__eyes"></i><i class="emoji__mouth"><i class="emoji__tongue"></i></i></i></i>','<i class="emoji emoji--yay"><i class="emoji__face"><i class="emoji__eyebrows"></i><i class="emoji__mouth"></i></i></i>','<i class="emoji emoji--wow"><i class="emoji__face"><i class="emoji__eyebrows"></i><i class="emoji__eyes"></i><i class="emoji__mouth"></i></i></i>','<i class="emoji emoji--happy"><i class="emoji__face"><i class="emoji__eyes"></i><i class="emoji__mouth"></i></i></i>','<i class="emoji emoji--funny"><i class="emoji__face"><i class="emoji__eyebrows"></i><i class="emoji__eyes"></i><i class="emoji__mouth"></i></i></i>','<i class="emoji emoji--charmed"><i class="emoji__face"><i class="emoji__eyes"><i class="emoji__eye emoji__eye-left"></i><i class="emoji__eye emoji__eye-right"></i></i><i class="emoji__mouth"></i></i></i>'],i=1;i<=20;i++){var emo=emoji[this.randNumb(emoji.length,!1)];react.append('<i class="d-none">'+emo+"</i>")}},again:function(){wish.music.stop(),wish.loader.hide(),randBg=bg[Math.floor(Math.random()*bg.length)],randHb=hb[Math.floor(Math.random()*hb.length)],$(".react>i").addClass("d-none"),$(".thank-you").addClass("d-none"),$(".expo,.text,.name,.text-numb").each((function(){$(this).removeClass($(this).data("in")).removeClass($(this).data("out")).addClass("d-none")})),$(".name,.text-numb").removeClass("d-none").addClass("d-hide"),$(".cake .cl").each((function(){$(this).removeClass($(this).data("in")).removeClass($(this).data("out")).removeClass("active activated")})),$(".balloon .bln-has-itm").each((function(){var ball=$(this);ball.addClass("d-hide").removeClass(ball.data("in")+" animated "+ball.data("out"))}));var gw=$(".gallery-wrap").removeClass("active");gw.animate({scrollTop:0},600),gw.addClass("d-hide-bdr d-hide-all").find("figcaption").removeClass("animated").removeClass(gw.data("in")).removeClass(gw.data("out")),$(".scroll-wrap").find("img,.txt").each((function(){$(this).removeAttr("style")})),$(".confetti").hide(),$(".title").addClass("d-fold");var txt_a=$('[data-ani="a"]'),txt_b=$('[data-ani="b"]'),txt_c=$('[data-ani="c"]'),txt_d=$('[data-ani="d"]'),txt_e=$('[data-ani="e"]'),txt_f=$('[data-ani="f"]');txt_a.textillate("in").removeClass("d-none").on("inAnimationEnd.tlt",(function(){txt_b.textillate("in").removeClass("d-none").on("inAnimationEnd.tlt",(function(){txt_c.textillate("in").removeClass("d-none").on("inAnimationEnd.tlt",(function(){txt_d.textillate("in").removeClass("d-none").on("inAnimationEnd.tlt",(function(){txt_e.textillate("in").removeClass("d-none").on("inAnimationEnd.tlt",(function(){txt_f.textillate("in").removeClass("d-none")}))}))}))}))})),$(window).trigger("resize")},screen:function(){var txt_a=$('[data-ani="a"]'),txt_b=$('[data-ani="b"]'),txt_c=$('[data-ani="c"]'),txt_d=$('[data-ani="d"]'),txt_e=$('[data-ani="e"]'),txt_f=$('[data-ani="f"]'),expo_a=$(".expo-a"),expo_b=$(".expo-b"),expo_c=$(".expo-c"),expo_d=$(".expo-d"),expo_t=$(".expo-thanks"),expo_x=$(".expo-close"),expo_r=$(".expo-restart");$(window).bind("load",(function(){var title=new CircleType(document.querySelector(".title")).radius(130);$(title.element).fitText(1,{minFontSize:"20px",maxFontSize:"72px"}),$(".text-numb").fitText(1,{minFontSize:"72px",maxFontSize:"100px"}),txt_a.textillate({initialDelay:300,in:{effect:txt_a.data("in"),delayScale:1.5,delay:50,callback:function(){$(".react").fadeIn(600);var index=1,reactInit=setInterval((function(){$(".react i:nth-child("+index+")").removeClass("d-none"),(index+=1)==$(".react>i").length&&clearInterval(reactInit)}),500)}},out:{effect:txt_a.data("out"),delayScale:1,delay:20,shuffle:!0},callback:function(e){txt_b.textillate({delay:1e3,in:{effect:txt_b.data("in"),delayScale:1.5,delay:50,callback:function(){txt_c.textillate({initialDelay:200,in:{effect:txt_c.data("in"),delayScale:1.5,delay:35,callback:function(){txt_d.textillate({initialDelay:200,in:{effect:txt_d.data("in"),delayScale:1.5,delay:35,callback:function(){txt_e.textillate({initialDelay:200,in:{effect:txt_e.data("in"),delayScale:1.5,delay:35,callback:function(){txt_f.textillate({initialDelay:200,in:{effect:txt_f.data("in"),delayScale:1.5,delay:30,callback:function(){setTimeout((function(){expo_a.removeClass("d-none").addClass("animated "+expo_a.data("in"))}),1e3)}},out:{effect:txt_f.data("out"),delayScale:1,delay:20,shuffle:!0}})}},out:{effect:txt_e.data("out"),delayScale:1,delay:20,shuffle:!0}})}},out:{effect:txt_d.data("out"),delayScale:1,delay:20,shuffle:!0}})}},out:{effect:txt_c.data("out"),delayScale:1,delay:5,shuffle:!0,callback:function(){wish.cake.start()}},callback:function(){}})}},out:{effect:txt_b.data("out"),delayScale:1,delay:20,shuffle:!0},callback:function(){}})}})})),$("[data-ani]").on("start.tlt",(function(){$(this).removeClass("d-hide")})),expo_a.off().on("vclick",(function(){var $btn=$(this);$btn.removeClass($btn.data("in")).addClass($btn.data("out")),$(".react").fadeOut(600),$btn.on("animationend webkitAnimationEnd oAnimationEnd mozAnimationEnd",(function(){$btn.hasClass($btn.data("out"))&&($btn.addClass("d-none"),$(".text-wrap .text").textillate("out"))}))})),expo_b.off().on("vclick",(function(){var $btn=$(this);$btn.removeClass($btn.data("in")).addClass($btn.data("out")),$btn.on("animationend webkitAnimationEnd oAnimationEnd mozAnimationEnd",(function(){$btn.hasClass($btn.data("out"))&&($btn.addClass("d-none"),wish.cake.stop())}))})),$(".gallery").find("img").each((function(){this.complete?$(this).attr("src",$(this).data("src")):$(this).bind("load",(function(e){$(this).attr("src",$(this).data("src"))}))})),expo_c.off().on("vclick",(function(){var $btn=$(this);$(".gallery-wrap").animate({scrollTop:0},600,(function(){$btn.removeClass($btn.data("in")).addClass($btn.data("out")),$btn.on("animationend webkitAnimationEnd oAnimationEnd mozAnimationEnd",(function(){$btn.hasClass($btn.data("out"))&&($btn.addClass("d-none"),wish.gallery.sliceOut(),window.scrollme.init(),setTimeout((function(){$(".gallery-wrap").animate({scrollTop:$(".row-2").offset().top},(function(){setTimeout((function(){expo_d.removeClass("d-none").removeClass(expo_d.data("out")).addClass(expo_d.data("in"))}),500)}))}),1500))}))}))})),expo_d.off().on("animationend webkitAnimationEnd oAnimationEnd mozAnimationEnd",(function(){var $btn=$(this);setTimeout((function(){$btn.removeClass($btn.data("in")).addClass($btn.data("out")),$btn.on("animationend webkitAnimationEnd oAnimationEnd mozAnimationEnd",(function(){$btn.hasClass($btn.data("out"))&&$btn.addClass("d-none")}))}),2e3)})),expo_a.on("vclick",(function(){wish.music.stop(),setTimeout((function(){wish.mp3Id[randHb]&&(wish.music.play(wish.mp3Id[randHb]),wish.music.fade(0,.7,4e3,wish.mp3Id[randHb]))}),300)})),expo_b.on("vclick",(function(){wish.music.playing(wish.mp3Id[randHb])?wish.music.fade(1,0,1e3,wish.mp3Id[randHb]):wish.music.stop(),wish.mp3Id[randBg]&&(wish.music.play(wish.mp3Id[randBg]),wish.music.fade(0,.7,4e3,wish.mp3Id[randBg]))})),expo_r.on("vclick",(function(){$(this),wish.mp3Id.thx&&wish.music.fade(0,.45,500,wish.mp3Id.thx),setTimeout((function(){wish.music.stop()}),500)})),expo_x.on("vclick",(function(){wish.mp3Id.thx&&(wish.music.playing(wish.mp3Id.thx)&&wish.music.fade(1,0,500,wish.mp3Id.thx),wish.music.pause(wish.mp3Id[randBg])&&(wish.music.play(wish.mp3Id[randBg]),wish.music.fade(0,1,1e3,wish.mp3Id[randBg])))})),expo_t.on("vclick",(function(){wish.music.playing(wish.mp3Id[randBg])&&wish.music.pause(wish.mp3Id[randBg]),wish.mp3Id.thx&&(wish.music.play(wish.mp3Id.thx),wish.music.fade(0,.45,2e3,wish.mp3Id.thx))})),$(".expo").on("vclick",(function(){wish.mp3Id.btn&&wish.music.play(wish.mp3Id.btn)})),$(".gallery figure").each((function(){$(this).on("animationend webkitAnimationEnd oAnimationEnd mozAnimationEnd",(function(){wish.mp3Id.box&&(wish.music.stop(wish.mp3Id.box),wish.music.play(wish.mp3Id.box))}))}))}},$((function(){wish.init(),wish.loader.show()}))}(),function(){var tq,fr,c=document.getElementById("thank-you"),w=c.width=window.innerWidth,h=c.height=window.innerHeight,ctx=c.getContext("2d"),hw=w/2,hh=h/2,opts={strings:["THANK","YOU"],charSize:30,charSpacing:35,lineHeight:40,cx:w/2,cy:h/2,fireworkPrevPoints:10,fireworkBaseLineWidth:5,fireworkAddedLineWidth:8,fireworkSpawnTime:200,fireworkBaseReachTime:30,fireworkAddedReachTime:30,fireworkCircleBaseSize:20,fireworkCircleAddedSize:10,fireworkCircleBaseTime:30,fireworkCircleAddedTime:30,fireworkCircleFadeBaseTime:10,fireworkCircleFadeAddedTime:5,fireworkBaseShards:5,fireworkAddedShards:5,fireworkShardPrevPoints:3,fireworkShardBaseVel:4,fireworkShardAddedVel:2,fireworkShardBaseSize:3,fireworkShardAddedSize:3,gravity:.1,upFlow:-.1,letterContemplatingWaitTime:360,balloonSpawnTime:20,balloonBaseInflateTime:10,balloonAddedInflateTime:10,balloonBaseSize:20,balloonAddedSize:20,balloonBaseVel:.4,balloonAddedVel:.4,balloonBaseRadian:-(Math.PI/2-.5),balloonAddedRadian:-1},calc={totalWidth:opts.charSpacing*Math.max(opts.strings[0].length,opts.strings[1].length)},Tau=2*Math.PI,TauQuarter=Tau/4,letters=[];function Letter(char,x,y){this.char=char,this.x=x,this.y=y,this.dx=-ctx.measureText(char).width/2,this.dy=+opts.charSize/2,this.fireworkDy=this.y-hh;var hue=x/calc.totalWidth*360;this.color="hsl(hue,80%,50%)".replace("hue",hue),this.lightAlphaColor="hsla(hue,80%,light%,alp)".replace("hue",hue),this.lightColor="hsl(hue,80%,light%)".replace("hue",hue),this.alphaColor="hsla(hue,80%,50%,alp)".replace("hue",hue),this.reset()}function Shard(x,y,vx,vy,color){var vel=opts.fireworkShardBaseVel+opts.fireworkShardAddedVel*Math.random();this.vx=vx*vel,this.vy=vy*vel,this.x=x,this.y=y,this.prevPoints=[[x,y]],this.color=color,this.alive=!0,this.size=opts.fireworkShardBaseSize+opts.fireworkShardAddedSize*Math.random()}function generateBalloonPath(x,y,size){ctx.moveTo(x,y),ctx.bezierCurveTo(x-size/2,y-size/2,x-size/4,y-size,x,y-size),ctx.bezierCurveTo(x+size/4,y-size,x+size/2,y-size/2,x,y)}function anim(){tq=window.requestAnimationFrame(anim),ctx.fillStyle="#111",ctx.fillRect(0,0,w,h),ctx.translate(hw,hh);for(var done=!0,l=0;l<letters.length;++l)letters[l].step(),"done"!==letters[l].phase&&(done=!1);if(ctx.translate(-hw,-hh),done)for(l=0;l<letters.length;++l)letters[l].reset()}ctx.font=opts.charSize+"px Arial",Letter.prototype.reset=function(){this.phase="firework",this.tick=0,this.spawned=!1,this.spawningTime=opts.fireworkSpawnTime*Math.random()|0,this.reachTime=opts.fireworkBaseReachTime+opts.fireworkAddedReachTime*Math.random()|0,this.lineWidth=opts.fireworkBaseLineWidth+opts.fireworkAddedLineWidth*Math.random(),this.prevPoints=[[0,hh,0]]},Letter.prototype.step=function(){if("firework"===this.phase)if(this.spawned){++this.tick;var linearProportion=this.tick/this.reachTime,armonicProportion=Math.sin(linearProportion*TauQuarter),x=linearProportion*this.x,y=hh+armonicProportion*this.fireworkDy;this.prevPoints.length>opts.fireworkPrevPoints&&this.prevPoints.shift(),this.prevPoints.push([x,y,linearProportion*this.lineWidth]);for(var lineWidthProportion=1/(this.prevPoints.length-1),i=1;i<this.prevPoints.length;++i){var point=this.prevPoints[i],point2=this.prevPoints[i-1];ctx.strokeStyle=this.alphaColor.replace("alp",i/this.prevPoints.length),ctx.lineWidth=point[2]*lineWidthProportion*i,ctx.beginPath(),ctx.moveTo(point[0],point[1]),ctx.lineTo(point2[0],point2[1]),ctx.stroke()}if(this.tick>=this.reachTime){this.phase="contemplate",this.circleFinalSize=opts.fireworkCircleBaseSize+opts.fireworkCircleAddedSize*Math.random(),this.circleCompleteTime=opts.fireworkCircleBaseTime+opts.fireworkCircleAddedTime*Math.random()|0,this.circleCreating=!0,this.circleFading=!1,this.circleFadeTime=opts.fireworkCircleFadeBaseTime+opts.fireworkCircleFadeAddedTime*Math.random()|0,this.tick=0,this.tick2=0,this.shards=[];var shardCount=opts.fireworkBaseShards+opts.fireworkAddedShards*Math.random()|0,angle=Tau/shardCount,cos=Math.cos(angle),sin=Math.sin(angle);for(x=1,y=0,i=0;i<shardCount;++i){var x1=x;x=x*cos-y*sin,y=y*cos+x1*sin,this.shards.push(new Shard(this.x,this.y,x,y,this.alphaColor))}}}else++this.tick,this.tick>=this.spawningTime&&(this.tick=0,this.spawned=!0);else if("contemplate"===this.phase){if(++this.tick,this.circleCreating){++this.tick2;var proportion=this.tick2/this.circleCompleteTime,armonic=-Math.cos(proportion*Math.PI)/2+.5;ctx.beginPath(),ctx.fillStyle=this.lightAlphaColor.replace("light",50+50*proportion).replace("alp",proportion),ctx.beginPath(),ctx.arc(this.x,this.y,armonic*this.circleFinalSize,0,Tau),ctx.fill(),this.tick2>this.circleCompleteTime&&(this.tick2=0,this.circleCreating=!1,this.circleFading=!0)}else this.circleFading?(ctx.fillStyle=this.lightColor.replace("light",70),ctx.fillText(this.char,this.x+this.dx,this.y+this.dy),++this.tick2,proportion=this.tick2/this.circleFadeTime,armonic=-Math.cos(proportion*Math.PI)/2+.5,ctx.beginPath(),ctx.fillStyle=this.lightAlphaColor.replace("light",100).replace("alp",1-armonic),ctx.arc(this.x,this.y,this.circleFinalSize,0,Tau),ctx.fill(),this.tick2>=this.circleFadeTime&&(this.circleFading=!1)):(ctx.fillStyle=this.lightColor.replace("light",70),ctx.fillText(this.char,this.x+this.dx,this.y+this.dy));for(i=0;i<this.shards.length;++i)this.shards[i].step(),this.shards[i].alive||(this.shards.splice(i,1),--i);if(this.tick>opts.letterContemplatingWaitTime){this.phase="balloon",this.tick=0,this.spawning=!0,this.spawnTime=opts.balloonSpawnTime*Math.random()|0,this.inflating=!1,this.inflateTime=opts.balloonBaseInflateTime+opts.balloonAddedInflateTime*Math.random()|0,this.size=opts.balloonBaseSize+opts.balloonAddedSize*Math.random()|0;var rad=opts.balloonBaseRadian+opts.balloonAddedRadian*Math.random(),vel=opts.balloonBaseVel+opts.balloonAddedVel*Math.random();this.vx=Math.cos(rad)*vel,this.vy=Math.sin(rad)*vel}}else"balloon"===this.phase&&(ctx.strokeStyle=this.lightColor.replace("light",80),this.spawning?(++this.tick,ctx.fillStyle=this.lightColor.replace("light",70),ctx.fillText(this.char,this.x+this.dx,this.y+this.dy),this.tick>=this.spawnTime&&(this.tick=0,this.spawning=!1,this.inflating=!0)):this.inflating?(++this.tick,proportion=this.tick/this.inflateTime,x=this.cx=this.x,y=this.cy=this.y-this.size*proportion,ctx.fillStyle=this.alphaColor.replace("alp",proportion),ctx.beginPath(),generateBalloonPath(x,y,this.size*proportion),ctx.fill(),ctx.beginPath(),ctx.moveTo(x,y),ctx.lineTo(x,this.y),ctx.stroke(),ctx.fillStyle=this.lightColor.replace("light",70),ctx.fillText(this.char,this.x+this.dx,this.y+this.dy),this.tick>=this.inflateTime&&(this.tick=0,this.inflating=!1)):(this.cx+=this.vx,this.cy+=this.vy+=opts.upFlow,ctx.fillStyle=this.color,ctx.beginPath(),generateBalloonPath(this.cx,this.cy,this.size),ctx.fill(),ctx.beginPath(),ctx.moveTo(this.cx,this.cy),ctx.lineTo(this.cx,this.cy+this.size),ctx.stroke(),ctx.fillStyle=this.lightColor.replace("light",70),ctx.fillText(this.char,this.cx+this.dx,this.cy+this.dy+this.size),(this.cy+this.size<-hh||this.cx<-hw||this.cy>hw)&&(this.phase="done")))},Shard.prototype.step=function(){this.x+=this.vx,this.y+=this.vy+=opts.gravity,this.prevPoints.length>opts.fireworkShardPrevPoints&&this.prevPoints.shift(),this.prevPoints.push([this.x,this.y]);for(var lineWidthProportion=this.size/this.prevPoints.length,k=0;k<this.prevPoints.length-1;++k){var point=this.prevPoints[k],point2=this.prevPoints[k+1];ctx.strokeStyle=this.color.replace("alp",k/this.prevPoints.length),ctx.lineWidth=k*lineWidthProportion,ctx.beginPath(),ctx.moveTo(point[0],point[1]),ctx.lineTo(point2[0],point2[1]),ctx.stroke()}this.prevPoints[0][1]>hh&&(this.alive=!1)};for(var i=0;i<opts.strings.length;++i)for(var j=0;j<opts.strings[i].length;++j)letters.push(new Letter(opts.strings[i][j],j*opts.charSpacing+opts.charSpacing/2-opts.strings[i].length*opts.charSize/2,i*opts.lineHeight+opts.lineHeight/2-opts.strings.length*opts.lineHeight/2));window.addEventListener("resize",(function(){w=c.width=window.innerWidth,h=c.height=window.innerHeight,hw=w/2,hh=h/2,ctx.font=opts.charSize+"px Arial"})),$(".expo-thanks").on("vclick",(function(){var thanks=$(".thank-you").removeClass("d-none");if(tq)for(var l=0;l<letters.length;++l)letters[l].reset();window.cancelAnimationFrame(tq),ctx.clearRect(0,0,c.width,c.height),anim(),setTimeout((function(){thanks.find(".expo").removeClass("d-none").addClass(thanks.find(".expo").data("in"))}),6500)})),$(".thank-you .expo-close").on("vclick",(function(){window.cancelAnimationFrame(fr),window.cancelAnimationFrame(tq),$(this).closest(".thank-you").addClass("d-none").find(".expo").each((function(){$(this).removeClass($(this).data("in")).removeClass($(this).data("out")).addClass("d-none")}))})),$(".expo-restart").on("vclick",(function(){wish.loader.show(),window.cancelAnimationFrame(fr),window.cancelAnimationFrame(tq),setTimeout((function(){wish.again()}),2e3)}));var mx,my,canvas=document.getElementById("firework"),ctx2=canvas.getContext("2d"),cw=window.innerWidth,ch=window.innerHeight,fireworks=[],particles=[],hue=120,limiterTotal=5,limiterTick=0,timerTotal=80,timerTick=0,mousedown=!1;function random(min,max){return Math.random()*(max-min)+min}function calculateDistance(p1x,p1y,p2x,p2y){var xDistance=p1x-p2x,yDistance=p1y-p2y;return Math.sqrt(Math.pow(xDistance,2)+Math.pow(yDistance,2))}function Firework(sx,sy,tx,ty){for(this.x=sx,this.y=sy,this.sx=sx,this.sy=sy,this.tx=tx,this.ty=ty,this.distanceToTarget=calculateDistance(sx,sy,tx,ty),this.distanceTraveled=0,this.coordinates=[],this.coordinateCount=3;this.coordinateCount--;)this.coordinates.push([this.x,this.y]);this.angle=Math.atan2(ty-sy,tx-sx),this.speed=2,this.acceleration=1.05,this.brightness=random(50,70),this.targetRadius=1}function Particle(x,y){for(this.x=x,this.y=y,this.coordinates=[],this.coordinateCount=5;this.coordinateCount--;)this.coordinates.push([this.x,this.y]);this.angle=random(0,2*Math.PI),this.speed=random(1,10),this.friction=.95,this.gravity=1,this.hue=random(hue-20,hue+20),this.brightness=random(50,80),this.alpha=1,this.decay=random(.015,.03)}function loop(){fr=window.requestAnimationFrame(loop),hue+=.5,ctx2.globalCompositeOperation="destination-out",ctx2.fillStyle="rgba(0, 0, 0, 0.5)",ctx2.fillRect(0,0,cw,ch),ctx2.globalCompositeOperation="lighter";for(var i=fireworks.length;i--;)fireworks[i].draw(),fireworks[i].update(i);for(i=particles.length;i--;)if(particles[i].draw(),particles[i].update(i),i==particles.length){var j=parseInt(particles.length);0==j?wish.music.play(wish.mp3Id.fw4):j>6&&j<10?wish.music.play(wish.mp3Id.fw1):j>10&&j<16?wish.music.play(wish.mp3Id.fw2):j>16&&wish.music.play(wish.mp3Id.fw3)}timerTick>=timerTotal?mousedown||(fireworks.push(new Firework(cw/2,ch,random(0,cw),random(0,ch/2))),timerTick=0):timerTick++,limiterTick>=limiterTotal?mousedown&&(fireworks.push(new Firework(cw/2,ch,mx,my)),limiterTick=0):limiterTick++}canvas.width=cw,canvas.height=ch,Firework.prototype.update=function(index){this.coordinates.pop(),this.coordinates.unshift([this.x,this.y]),this.targetRadius<8?this.targetRadius+=.3:this.targetRadius=1,this.speed*=this.acceleration;var vx=Math.cos(this.angle)*this.speed,vy=Math.sin(this.angle)*this.speed;this.distanceTraveled=calculateDistance(this.sx,this.sy,this.x+vx,this.y+vy),this.distanceTraveled>=this.distanceToTarget?(function createParticles(x,y){for(var particleCount=30;particleCount--;)particles.push(new Particle(x,y))}(this.tx,this.ty),fireworks.splice(index,1)):(this.x+=vx,this.y+=vy)},Firework.prototype.draw=function(){ctx2.beginPath(),ctx2.moveTo(this.coordinates[this.coordinates.length-1][0],this.coordinates[this.coordinates.length-1][1]),ctx2.lineTo(this.x,this.y),ctx2.strokeStyle="hsl("+hue+", 100%, "+this.brightness+"%)",ctx2.stroke(),ctx2.beginPath(),ctx2.arc(this.tx,this.ty,this.targetRadius,0,2*Math.PI),ctx2.stroke()},Particle.prototype.update=function(index){if(this.coordinates.pop(),this.coordinates.unshift([this.x,this.y]),this.speed*=this.friction,this.x+=Math.cos(this.angle)*this.speed,this.y+=Math.sin(this.angle)*this.speed+this.gravity,this.alpha-=this.decay,this.alpha<=this.decay){particles.splice(index,1);var j=index;0==j||j>10?(wish.music.play(wish.mp3Id.fw4),wish.music.play(wish.mp3Id.fw2)):j>10?wish.music.play(wish.mp3Id.fw1):j>10&&j<16?wish.music.play(wish.mp3Id.fw2):j>16&&wish.music.play(wish.mp3Id.fw3)}},Particle.prototype.draw=function(){ctx2.beginPath(),ctx2.moveTo(this.coordinates[this.coordinates.length-1][0],this.coordinates[this.coordinates.length-1][1]),ctx2.lineTo(this.x,this.y),ctx2.strokeStyle="hsla("+this.hue+", 100%, "+this.brightness+"%, "+this.alpha+")",ctx2.stroke()},canvas.addEventListener("mousemove",(function(e){mx=e.pageX-canvas.offsetLeft,my=e.pageY-canvas.offsetTop})),canvas.addEventListener("mousedown",(function(e){e.preventDefault(),mousedown=!0})),canvas.addEventListener("mouseup",(function(e){e.preventDefault(),mousedown=!1})),window.addEventListener("resize",(function(){cw=window.innerWidth,ch=window.innerHeight})),$(".expo-thanks").on("vclick",(function(){window.cancelAnimationFrame(fr),ctx2.clearRect(0,0,canvas.width,canvas.height),loop()}))}();